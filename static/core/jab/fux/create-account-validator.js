/* Create Account Validator */
var objectString,arrayString,profile={},lodging=[];function validateUsername(){var t=document.getElementById("uname"),n=document.getElementById("unameError");try{if(!1===/.{4,}/.test(t.value))throw"Username must be at least 4 characters.";if(!0===/\W/.test(t.value))throw"Username must only contain letters and numbers.";t.style.background="",n.style.display="none",n.innerHTML="",profile.username=t.value,document.getElementById("profileUname").innerHTML=profile.username,document.getElementById("profile").style.display="block",document.getElementById("unameSection").style.display="block"}catch(e){n.style.display="block",n.innerHTML=e}}function validatePassword(){var t=document.getElementById("pw1"),n=document.getElementById("pw2"),a=document.getElementById("passwordError");try{if(!1===/.{8,}/.test(t.value))throw"Password must be at least 8 characters.";if(0!==t.value.localeCompare(n.value))throw"Passwords must match.";if(!1===/[a-zA-z]/.test(t.value))throw"Password must contain at least one letter.";if(!1===/\d/.test(t.value))throw"Password must contain at least one number.";if(!1===/[!@$%*_]/.test(t.value))throw"Password must contain at least one of the following symbols: ! @ $ % * _";t.style.background="",n.style.background="",a.style.display="none",a.innerHTML="",profile.password=t.value}catch(e){a.style.display="block",a.innerHTML=e}}function validateEmail(){var t=document.getElementById("emailbox"),n=document.getElementById("emailError");try{if(!1===/^[_\w\-]+(\.[_\w\-]+)*@[\w\-]+(\.[\w\-]+)*(\.[\D]{2,6})$/.test(t.value))throw"Please provide a valid email address.";t.style.background="",n.innerHTML="",n.style.display="none",t.value=t.value.toLowerCase(),profile.email=t.value,document.getElementById("profileEmail").innerHTML=profile.email,document.getElementById("profile").style.display="block",document.getElementById("emailSection").style.display="block"}catch(e){n.innerHTML=e,n.style.display="block"}}function registerLodging(e){void 0===e&&(e=window.event);var t=e.target||e.srcElement,n=t.value;if(t.checked){lodging.push(n);var a=document.createElement("li");a.innerHTML=n,document.getElementById("preferences").appendChild(a),document.getElementById("profile").style.display="block",document.getElementById("acctPrefs").style.display="block"}else for(var l=document.querySelectorAll("#preferences li"),r=0;r<l.length;r++)if(l[r].innerHTML===n){lodging.splice(r,1),l[r].parentNode.removeChild(l[r]);break}}function convertToString(){arrayString=lodging.toString(),objectString=JSON.stringify(profile)}function createAccountListeners(){var e=document.getElementById("uname"),t=document.getElementById("pw2"),n=document.getElementById("emailbox");e.addEventListener?(e.addEventListener("change",validateUsername,!1),t.addEventListener("change",validatePassword,!1),n.addEventListener("change",validateEmail,!1)):e.attachEvent&&(e.attachEvent("onchange",validateUsername),t.attachEvent("onchange",validatePassword),n.attachEvent("onchange",validateEmail));var a=document.getElementsByName("prefs");if(a[0].addEventListener)for(var l=0;l<a.length;l++)a[l].addEventListener("change",registerLodging,!1);else if(a[0].attachEvent)for(l=0;l<a.length;l++)a[l].attachEvent("onchange",registerLodging);var r=document.getElementById("createAcct");r.addEventListener?r.addEventListener("click",convertToString,!1):r.attachEvent&&r.attachEvent("onclick",convertToString)}window.addEventListener?window.addEventListener("load",createAccountListeners,!1):window.attachEvent&&window.attachEvent("onload",createAccountListeners);