/* Credit Card Validator */
var $cc={};$cc.validate=function(t){if(""==t.target.value)return t.target.previousElementSibling.className="card-type",void(t.target.nextElementSibling.className="card-valid");for(var a,e=String(t.target.value),r="",n=0;n<e.length;n++)/^[0-9]+$/.test(e.charAt(n))&&(r+=e.charAt(n));if("Backspace"!=t.key){for(var l="",n=0;n<r.length;n++)3==n||7==n||11==n?l=l+r.charAt(n)+" ":l+=r.charAt(n);t.target.value=l}12<=r.length&&(a=function(t){for(var a=t.split("").reverse(),e=0;e<a.length;e++)e%2!=0&&(a[e]=2*a[e],9<a[e]&&(a[e]=parseInt(String(a[e]).charAt(0))+parseInt(String(a[e]).charAt(1))));for(var r=0,e=1;e<a.length;e++)r+=parseInt(a[e]);return r=9*r%10,a[0]==r}(r)),t.target.nextElementSibling.className=1==a?"card-valid active":"card-valid";for(var c=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],n=0;n<c.length;n++)e.match(c[n].pattern)&&(t.target.previousElementSibling.className="card-type "+c[n].name)},$cc.expiry=function(t){if("Backspace"!=t.key){for(var a=String(this.value),e="",r=0;r<a.length;r++)1==r&&"/"==a.charAt(r)&&(e=0+a.charAt(0)),/^[0-9]+$/.test(a.charAt(r))&&(e+=a.charAt(r));for(var n="",r=0;r<e.length;r++)/^[0-9]+$/.test(e.charAt(r))&&(0==r&&1<e.charAt(r)?(n+=0,n+=e.charAt(r),n+="/"):1==r?(n+=e.charAt(r),n+="/"):2==r&&e.charAt(r)<2?n+="20"+e.charAt(r):n+=e.charAt(r));this.value=n}};